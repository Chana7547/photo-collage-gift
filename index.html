<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Bold Shape Collage Maker (No Text)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Prompt:wght@300;600&display=swap');

        body { font-family: 'Prompt', sans-serif; background: #f0f2f5; display: flex; flex-direction: column; align-items: center; padding: 20px; color: #2d3436; }
        
        .main-container { display: flex; gap: 30px; align-items: flex-start; max-width: 1200px; }

        /* ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠ */
        .sidebar { width: 320px; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee; position: sticky; top: 20px; }
        
        .ui-group { margin-bottom: 20px; }
        label { font-weight: 600; display: block; margin-bottom: 8px; color: #636e72; }
        select, input, button { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #dfe6e9; font-size: 14px; box-sizing: border-box; }
        
        /* ‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏π‡∏õ */
        .count-badge { background: #ebfbee; color: #2f9e44; padding: 15px; border-radius: 10px; border: 1px dashed #b2f2bb; text-align: center; margin-bottom: 20px; font-weight: 600; }
        .count-badge span { font-size: 28px; display: block; }

        button.btn-save { background: #2d3436; color: white; border: none; cursor: pointer; font-weight: 600; font-size: 16px; margin-top: 10px; transition: 0.2s; }
        button.btn-save:hover { background: #000; transform: translateY(-2px); }

        /* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ */
        .summary-table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 13px; }
        .summary-table td { border-bottom: 1px solid #eee; padding: 8px 5px; text-align: left; }

        /* --- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà A4 : ‡∏•‡πá‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡∏ó‡∏£‡∏á‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á --- */
        #a4-canvas {
            width: 595px; height: 842px; background: white; 
            display: flex; align-items: center; justify-content: center; /* ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡∏ó‡∏£‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡∏•‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÄ‡∏õ‡πä‡∏∞‡πÜ */
            box-sizing: border-box; position: relative; box-shadow: 0 0 40px rgba(0,0,0,0.1);
        }

        .shape-grid { 
            display: grid; 
            grid-template-columns: repeat(7, 65px); 
            grid-template-rows: repeat(9, 65px); 
            gap: 10px; 
        }

        .slot { width: 65px; height: 65px; background: transparent; }
        .slot.active { background: #fff; border: 4px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-radius: 2px; overflow: hidden; }
        .slot img { width: 100%; height: 100%; object-fit: cover; display: block; }
    </style>
</head>
<body>

    <h2 style="margin-bottom: 20px;">üñºÔ∏è Shape Collage Maker (Clean A4)</h2>

    <div class="main-container">
        <div class="sidebar">
            <div class="count-badge">
                <small>‡∏£‡∏π‡∏õ‡∏ó‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</small>
                <span id="photoCount">0</span>
                <small>‡πÉ‡∏ö</small>
            </div>

            <div class="ui-group">
                <label>1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏ó‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</label>
                <select id="shapeSelect">
                    <option value="heart">‚ù§Ô∏è ‡∏´‡∏±‡∏ß‡πÉ‡∏à (Heart)</option>
                    <option value="1">‡πÄ‡∏•‡∏Ç 1</option>
                    <option value="2">‡πÄ‡∏•‡∏Ç 2</option>
                    <option value="3">‡πÄ‡∏•‡∏Ç 3</option>
                    <option value="4">‡πÄ‡∏•‡∏Ç 4</option>
                    <option value="5">‡πÄ‡∏•‡∏Ç 5</option>
                    <option value="6">‡πÄ‡∏•‡∏Ç 6</option>
                    <option value="7">‡πÄ‡∏•‡∏Ç 7</option>
                    <option value="8">‡πÄ‡∏•‡∏Ç 8</option>
                    <option value="9">‡πÄ‡∏•‡∏Ç 9</option>
                    <option value="0">‡πÄ‡∏•‡∏Ç 0</option>
                </select>
            </div>

            <div class="ui-group">
                <label>2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</label>
                <input type="file" id="imageInput" multiple accept="image/*">
            </div>

            <button class="btn-save" onclick="saveImage()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ A4 (No Text)</button>

            <table class="summary-table">
                <tbody>
                    <tr><td>‚ù§Ô∏è Heart: 41 ‡∏£‡∏π‡∏õ</td><td>‡πÄ‡∏•‡∏Ç 5: 30 ‡∏£‡∏π‡∏õ</td></tr>
                    <tr><td>‡πÄ‡∏•‡∏Ç 1: 23 ‡∏£‡∏π‡∏õ</td><td>‡πÄ‡∏•‡∏Ç 6: 31 ‡∏£‡∏π‡∏õ</td></tr>
                    <tr><td>‡πÄ‡∏•‡∏Ç 2: 26 ‡∏£‡∏π‡∏õ</td><td>‡πÄ‡∏•‡∏Ç 7: 23 ‡∏£‡∏π‡∏õ</td></tr>
                    <tr><td>‡πÄ‡∏•‡∏Ç 3: 28 ‡∏£‡∏π‡∏õ</td><td>‡πÄ‡∏•‡∏Ç 8: 35 ‡∏£‡∏π‡∏õ</td></tr>
                    <tr><td>‡πÄ‡∏•‡∏Ç 4: 31 ‡∏£‡∏π‡∏õ</td><td>‡πÄ‡∏•‡∏Ç 9: 28 ‡∏£‡∏π‡∏õ</td></tr>
                </tbody>
            </table>
        </div>

        <div id="a4-canvas">
            <div class="shape-grid" id="gridContainer"></div>
        </div>
    </div>

<script>
    const patterns = {
        'heart': [".XX.XX.", "XXXXXXX", "XXXXXXX", "XXXXXXX", "XXXXXXX", ".XXXXX.", "..XXX..", "...X...", "......."],
        '1': ["...XX..", "..XXX..", ".XXXX..", "...XX..", "...XX..", "...XX..", "...XX..", ".XXXXXX", "......."],
        '2': [".XXXXX.", "XX...XX", ".....XX", "....XX.", "...XX..", "..XX...", ".XX....", "XXXXXXX", "......."],
        '3': [".XXXXX.", "XX...XX", ".....XX", "..XXXX.", ".....XX", ".....XX", "XX...XX", ".XXXXX.", "......."],
        '4': ["...XX..", "..XXX..", ".XXXX..", "XX..XX.", "XXXXXXX", "XXXXXXX", "....XX.", "....XX.", "......."],
        '5': ["XXXXXXX", "XX.....", "XX.....", "XXXXXX.", ".....XX", ".....XX", "XX...XX", ".XXXXX.", "......."],
        '6': ["..XXXX.", ".XX....", "XX.....", "XXXXXX.", "XX...XX", "XX...XX", "XX...XX", ".XXXXX.", "......."],
        '7': ["XXXXXXX", "XX...XX", "....XX.", "...XX..", "...XX..", "..XX...", "..XX...", "..XX...", "......."],
        '8': [".XXXXX.", "XX...XX", "XX...XX", ".XXXXX.", "XX...XX", "XX...XX", "XX...XX", ".XXXXX.", "......."],
        '9': [".XXXXX.", "XX...XX", "XX...XX", ".XXXXXX", ".....XX", ".....XX", "....XX.", "...XXX.", "......."],
        '0': [".XXXXX.", "XX...XX", "XX...XX", "XX...XX", "XX...XX", "XX...XX", "XX...XX", ".XXXXX.", "......."]
    };

    const grid = document.getElementById('gridContainer');
    const photoCountLabel = document.getElementById('photoCount');
    let activeSlots = [];

    function build(shapeKey) {
        grid.innerHTML = '';
        activeSlots = [];
        patterns[shapeKey].forEach(row => {
            row.split('').forEach(char => {
                const div = document.createElement('div');
                div.className = 'slot' + (char === 'X' ? ' active' : '');
                grid.appendChild(div);
                if(char === 'X') activeSlots.push(div);
            });
        });
        photoCountLabel.innerText = activeSlots.length;
    }

    document.getElementById('shapeSelect').onchange = (e) => build(e.target.value);
    
    document.getElementById('imageInput').onchange = async (e) => {
        const files = Array.from(e.target.files);
        for(let i=0; i<files.length && i<activeSlots.length; i++) {
            const url = await new Promise(res => {
                const reader = new FileReader();
                reader.onload = (ev) => res(ev.target.result);
                reader.readAsDataURL(files[i]);
            });
            activeSlots[i].innerHTML = `<img src="${url}">`;
        }
    };

    function saveImage() {
        const area = document.getElementById('a4-canvas');
        html2canvas(area, { scale: 4, useCORS: true }).then(canvas => {
            const link = document.createElement('a');
            link.download = `shape-collage-${document.getElementById('shapeSelect').value}.png`;
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    build('heart');
</script>
</body>
</html>